(window.webpackJsonp=window.webpackJsonp||[]).push([[226],{1180:function(e,t,r){"use strict";r(46),r(44);var o=r(13);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feature,r=e.runOnMount,n=void 0===r||r;return{data:function(){return{runOnMount:n}},computed:{featureName:function(){return this.feature||t},canAccessFeature:function(){return this.checkCanAccessFeature(this.featureName)},planFeatures:function(){var e,t;return(null===(e=this.user)||void 0===e||null===(t=e.plan)||void 0===t?void 0:t.features)||[]}},methods:{promptForUpgrade:function(){this.canAccessFeature||o.a.$emit(o.b.UserOpenDashboardUpgradeModal,{onClose:this.handleCancelUpgrade})},handleCancelUpgrade:function(){console.log("cancelled")},checkCanAccessFeature:function(e){return!e||!this.planFeatures.length||this.planFeatures.includes(e)}},mounted:function(){this.user||console.error("No user availale for feature locking"),this.runOnMount&&this.promptForUpgrade()}}}},1285:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor">\n  <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />\n</svg>'},1286:function(e,t,r){"use strict";r(16),r(15),r(12),r(17),r(18);var o=r(3),n=r(122),c=r.n(n),l=r(341),d={components:{ArrowRight:c.a,Avatar:l.a},props:{prompt:{type:String,default:"View"},logo:{type:Object,required:!0}},computed:{color:function(){var e,t,r;return null===(e=this.logo)||void 0===e||null===(t=e.assets)||void 0===t||null===(r=t.palette)||void 0===r?void 0:r.background},wordmark:function(){var e;return(null===(e=this.logo)||void 0===e?void 0:e.wordmark)||""}}},h=r(8),f=Object(h.a)(d,(function(){var e=this,t=e._self._c;return e.logo?t("div",{staticClass:"flex-shrink-0 group flex items-center justify-start text-left"},[t("Avatar",{staticClass:"h-12 w-12 p-2 flex-shrink-0",attrs:{src:e.logo.previews&&e.logo.previews.tight_bounds,icon:e.logo.icon,color:e.color}}),e._v(" "),t("div",{staticClass:"ml-3 overflow-hidden flex-1"},[t("p",{staticClass:"no-translate text-sm leading-tight font-medium text-gray-700 group-hover:text-gray-900"},[e._v("\n      "+e._s(e.wordmark)+"\n    ")]),e._v(" "),e.prompt?t("p",{staticClass:"flex mt-0.5 items-center text-xs font-medium text-gray-500 group-hover:text-gray-700"},[e._v("\n      "+e._s(e.prompt)+"\n      "),t("ArrowRight",{staticClass:"w-2.5 h-2.5 ml-0.5 mt-px"})],1):e._e()])],1):e._e()}),[],!1,null,null,null).exports,v=r(1285),m=r.n(v);function w(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var y={components:{PackagePreview:f},props:{logo:{type:Object,required:!0},logos:{type:Array,default:function(){return[]}},user:{type:Object,required:!0}},data:function(){return{active:!1,createNewLogoPrompt:{icon:m.a,logo:{wordmark:"New Logo",previews:{}},prompt:"Create new logo"}}},computed:{logosToShowInList:function(){var e=this,t=this.logos.reduce((function(t,r){return r.id!==e.logo.id&&t.push(r),t}),[]);return this.userCanCreateMoreLogos&&t.push(function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},this.createNewLogoPrompt)),t},userCanCreateMoreLogos:function(){return this.logos.length<this.user.plan.max_saved_logos},canExpand:function(){return this.logosToShowInList.length>0||this.userCanCreateMoreLogos}},methods:{onOptionClick:function(option){var e=option.id?"/dashboard/".concat(option.id):"/business-name";this.$router.push(e)}}},O=y,x=Object(h.a)(O,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-full"},[e.logo?t("div",{staticClass:"relative w-full text-left focus:outline-none",attrs:{tabindex:"0"},on:{blur:function(t){e.active=!1}}},[t("span",{staticClass:"w-full rounded-md text-gray-700",class:{"cursor-pointer hover:text-gray-500":e.canExpand},attrs:{id:"package-switcher","aria-haspopup":"true","aria-expanded":e.active},on:{click:function(t){e.canExpand&&(e.active=!e.active)}}},[t("PackagePreview",{attrs:{logo:e.logo,prompt:e.canExpand?"Switch Logo":null}})],1),e._v(" "),t("transition",{attrs:{name:"dropdown"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],staticClass:"absolute inset-x-0 -mx-4 mt-2 max-h-60 overflow-y-auto rounded-md bg-white shadow-2xl origin-top z-10"},[t("div",{staticClass:"py-1",attrs:{role:"menu","aria-orientation":"vertical","aria-labelledby":"package-switcher"}},e._l(e.logosToShowInList,(function(option){return t("span",{key:option.id,staticClass:"w-full cursor-pointer border-b border-gray-100 whitespace-no-wrap text-left block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900",attrs:{role:"menuitem"},on:{click:function(t){return e.onOptionClick(option)}}},[t("PackagePreview",{attrs:{logo:option,prompt:option.prompt||"View logo"}})],1)})),0)])])],1):e._e()])}),[],!1,null,null,null);t.a=x.exports},1291:function(e,t,r){"use strict";r(16),r(15),r(12),r(17),r(18);var o=r(1),n=r(31),c=r(3),l=(r(19),r(68),r(42),r(101),r(48),r(13)),d=r(30),h=r(326),f=r(483),v=r(22),m=r.n(v);r(36);function w(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var O={mixins:[h.a],props:{params:{type:Array,default:function(){return[]}},logo:{type:Object,required:!0},path:{type:String,default:""}},data:function(){return{tokenRefreshInterval:null,initialToken:null}},computed:y(y({query:function(){var e,t,r={token:this.initialToken,roles:this.userRoles,logo:this.logo.id,background:this.bg,enterpriseName:this.companyName,enterpriseIcon:this.darkLogo,enterpriseLogo:this.darkLogo,enterprisePrimary:null===(e=this.palette)||void 0===e?void 0:e.primary,enterpriseSecondary:null===(t=this.palette)||void 0===t?void 0:t.secondary};return this.params.forEach((function(e){var t=Object(n.a)(e,2),o=t[0],c=t[1];r[o]=c})),new URLSearchParams(r)},stitch:function(){return(this.$store.state.flags.enable_stitch_edge?"https://stitch-edge.logo.com":"https://stitch.logo.com")+this.path+"?".concat(this.query)},bg:function(){return this.logo.assets.palette.background.replace("#","")},palette:function(){return this.enterprise.theme.palette}},Object(d.e)(["enterprise"])),Object(d.c)(["companyName","darkLogo"])),mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.currentSession();case 2:r=t.sent,n=r.getRefreshToken().token,c=r.getAccessToken().getJwtToken(),m.a.set("refreshToken",n,{domain:"logo.com"}),m.a.set("accessToken",c,{domain:"logo.com"}),e.initialToken=c,e.track(),window.addEventListener("message",e.handleStitchMessage),e.tokenRefreshInterval=setInterval(Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getToken();case 2:e.sendMessage("TOKEN_".concat(e.token));case 3:case"end":return t.stop()}}),t)}))),5e4);case 11:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){window.removeEventListener("message",this.handleStitchMessage),clearInterval(this.tokenRefreshInterval)},methods:{handleStitchMessage:function(e){var t=e.data,data=void 0===t?"":t;if("STITCH_EXIT"!==data&&"STITCH_FINISHED"!==data||this.$emit("exit"),"string"==typeof data&&data.startsWith("STITCH_PROGRESS:")){var r=data.split(":")[1];"socials"===r?this.$store.dispatch("dashboard/markStepAsComplete","social-media"):"business-cards"===r&&this.$store.dispatch("dashboard/markStepAsComplete","business-cards")}},sendMessage:function(e){if(this.$refs.stitch)try{this.$refs.stitch.contentWindow.postMessage(e,"*")}catch(e){}},track:function(){var e,t,r=this.$route.path,o=this.logo.id,n=(null===(e=r.replace("/dashboard/".concat(o,"/"),""))||void 0===e||null===(t=e.split("/"))||void 0===t?void 0:t[0])||r;l.a.$emit(l.b.AnalyticsGA4Event,{event:"stitch_visit",feature:n,logo:o})}}},x=r(8),component=Object(x.a)(O,(function(){var e=this,t=e._self._c;return!e.loadingUser&&this.initialToken?t("iframe",{ref:"stitch",staticClass:"translate-iframe",attrs:{src:e.stitch,frameborder:"0"}}):e._e()}),[],!1,null,null,null);t.a=component.exports},1328:function(e,t,r){"use strict";var o=r(1286),n=r(340),c=r(1291),l={components:{DashboardNavigation:n.a,SavedLogoSwitcher:o.a,Stitch:c.a},props:{params:{type:Array,default:function(){return[]}},logo:{type:Object,required:!0},path:{type:String,default:""},user:{type:Object,required:!0},logos:{type:Array,default:function(){return[]}}}},d=r(8),component=Object(d.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex h-screen flex-col"},[t("header",{staticClass:"flex bg-white border-b border-gray-200"},[t("div",{staticClass:"flex items-center w-64 px-4 py-1.5 border-r"},[t("SavedLogoSwitcher",{attrs:{logo:e.logo,logos:e.logos,user:e.user}})],1),e._v(" "),t("div",{staticClass:"flex-1 flex items-center relative flex-shrink-0 py-1.5 px-4"},[t("DashboardNavigation",{staticClass:"w-full",attrs:{logo:e.logo}})],1)]),e._v(" "),t("Stitch",e._b({staticClass:"w-screen flex-1",on:{exit:function(t){return e.$router.push("/dashboard/".concat(e.logo.id))}}},"Stitch",{params:e.params,path:e.path,logo:e.logo},!1))],1)}),[],!1,null,null,null);t.a=component.exports},2146:function(e,t,r){"use strict";r.r(t);r(42);var o=r(1328),n=r(1180),c={layout:"simple",transition:"fade",components:{StitchLayout:o.a},mixins:[Object(n.a)({feature:"social-media-creator"})],props:{loading:{type:Boolean,default:!0},logo:{type:Object,required:!0},user:{type:Object,required:!0},logos:{type:Array,default:function(){return[]}}},methods:{handleCancelUpgrade:function(){this.$router.replace("/dashboard/".concat(this.logo.id,"/social-media"))}}},l=r(8),component=Object(l.a)(c,(function(){var e=this,t=e._self._c;return t("div",[e.canAccessFeature?t("StitchLayout",e._b({},"StitchLayout",{logo:e.logo,logos:e.logos,user:e.user,path:"/dashboard/templates/socials"},!1)):e._e()],1)}),[],!1,null,null,null);t.default=component.exports}}]);
//# sourceMappingURL=52601c1.js.map